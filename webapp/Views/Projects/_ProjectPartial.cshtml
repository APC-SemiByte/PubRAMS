@model webapp.Models.ViewModels.ProjectViewModel;

<h2>@Model.Title</h2>
<p>Group: @Model.Group</p>
<p>Document: @Model.DocumentUrl</p>
<p>Abstract: @Model.Abstract</p>
<p>State: @Model.State</p>
<p>School: @Model.School</p>
<p>Subject: @Model.Subject</p>
<p>Course: @Model.Course</p>
@switch (@Model.Action)
{
    case "Approve":
        <form>
            <input name="ProjectId" value="@Model.Id" class="invisible" />
            <button class="btn btn-danger"
                hx-post="Projects/Reject"
                hx-swap="none"
                hx-on--after-request="location.reload()"
            >
                Return
            </button>
            <button class="btn btn-primary"
                hx-post="Projects/Accept"
                hx-swap="none"
                hx-on--after-request="location.reload()"
            >
                Approve
            </button>
        </form>
        break;

    case "Submit":
        <form>
            <input name="ProjectId" value="@Model.Id" class="invisible" />
            <button class="btn btn-primary"
                hx-post="Projects/Submit"
                hx-swap="none"
                hx-on--after-request="location.reload()"
            >
                Submit
            </button>
        </form>
        break;

    case "Assign":
        <form>
            <input name="ProjectId" value="@Model.Id" class="invisible" />
            <select name="ProofreaderEmail"
                hx-get="Form/Proofreaders"
                hx-trigger="intersect once"
                hx-target="this"
                hx-swap="innerHTML"
            >
                <!option>Loading...</!option>
            </select>
            <input name="Deadline" type="date" />
            <button class="btn btn-primary"
                hx-post="Projects/Assign"
                hx-swap="none"
                hx-on--after-request="location.reload()"
                hx-on--response-error="this.innerText = 'Invalid date'"
            >
                Assign
            </button>
            <span class="text-danger"></span>
        </form>
        break;

    default:
        break;
}
